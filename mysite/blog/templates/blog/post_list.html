{% extends 'blog/base.html' %}
{% block content %}

{% if posts %}
{% with posts.0 as hero %}
<section class="hero">
  {% if hero.image %}
  <img src="{{ hero.image.url }}" alt="{{ hero.title }}" class="hero-image">
  {% else %}
  <div class="hero-image"
    style="background:#ddd;height:420px;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#666">
    이미지 없음</div>
  {% endif %}
  <div class="hero-overlay">
    <h2 class="hero-title">{{ hero.title }}</h2>
    <p class="hero-date">{{ hero.published_date|date:"Y년 n월 j일 g:i A" }}</p>
    <p class="hero-author">작성자: {{ hero.author.get_full_name|default:hero.author.username }}</p>
  </div>
</section>
{% endwith %}
{% endif %}

<section class="post-list">
  {% for post in posts|slice:"1:" %}
  <article class="post-card">
    <a href="#" class="card-link">
      <div class="card-image-wrap">
        {% if post.image %}
        <img src="{{ post.image.url }}" alt="{{ post.title }}" class="card-image">
        {% else %}
        <div
          style="background:#f3f3f3;width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#999">
          이미지 없음</div>
        {% endif %}
      </div>
      <div class="card-body">
        <h3 class="card-title">{{ post.title }}</h3>
        <p class="card-excerpt">{{ post.text|truncatechars:150 }}</p>
        <div class="card-meta">{{ post.published_date|date:"Y년 n월 j일 g:i A" }} &middot; 작성자: {{
          post.author.get_full_name|default:post.author.username }}</div>
      </div>
    </a>
  </article>
  {% empty %}
  <p>포스트가 없습니다.</p>
  {% endfor %}
</section>

{% endblock %}